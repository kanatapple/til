# 文

## 9.5 繰返し文

繰返しは for 文と while 文と do 文で表現できる

```cpp
while (条件) 文
do 文 while (式);
for (for 初期化文 条件opt; 式opt) 文
for (for 初期化宣言 : 式) 文
```

for 初期化文は、宣言と式文のいずれかで、どちらの場合も末尾にセミコロンが必要

for 初期化宣言は、単一の未初期化変数の宣言でなければならない

for 文が対象とする文(被制御文、あるいはループ本体)は条件が false になるまで、あるいは何らかの方法(break、return、throw、goto など)によってループを抜け出るまで実行される

### 9.5.1 範囲 for 文

範囲 for 文は、ある範囲内の全要素がアクセスできる

```cpp
int sum(vector<int>& v) {
    int s = 0;
    for (int x : v) {
        s += x;
    }
    return s;
}
```

`for (int x : v)` の部分は、"範囲 v 中の各要素 x に対して～"、あるいは、"v 内の各 x に対して～"と読める

この時、v 内の要素は先頭から末尾へと順にアクセスされる


要素を表す変数のスコープは for 文と同じ

コロンの後ろの式はシーケンス(範囲)を表していて、`v.begin()` と `v.end()`、あるいは、`begin(v)` と `end(v)` によって反復子が得られるものでなければならない

`begin(c)` と `end(c)` は <iterator> ヘッダが提供する

独自のシーケンスを自作する際は、標準ライブラリのコンテナと同じ方法で `begin()` と `end()` を定義することが可能

非制御変数は、走査において現在着目している要素を参照する(以下の for 文での *p と同じ)

```cpp
int sum2(vector<int>& v) {
    int s = 0;
    for (auto p = begin(v); p != end(v); ++p) {
        s += *p;
    }
    return s;
}
```

範囲 for 文のループの中で要素の値を変更する場合、要素を表す変数(非制御変数)は参照でなければならない

```cpp
void incr(vector<int>& v) {
    for (int& x : v) [
        ++x;
    }
}
```

範囲 for 文は単純な構造なので、同時に2つの要素を表せないし、2つの範囲を同時に走査することはできない

この場合は、通常の for 文を用いる
