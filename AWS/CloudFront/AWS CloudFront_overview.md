# CloudFrontとは？

静的および動的なウェブコンテンツ (.html、.css、.php、イメージファイルなど) をユーザーに高速に配信するウェブサービス  
CloudFrontはエッジロケーションというデータセンターの世界的ネットワークを経由してコンテンツを配信する  
コンテンツがエッジロケーションに存在している場合、CloudFrontはコンテンツを即時に配信し、コンテンツが存在しない場合は、コンテンツの最終バージョンのソースとして識別されているS3バケットまたはHTTPサーバーからコンテンツを取り込む

## コンテンツを配信するようにCloudFrontを構成する方法

1. オリジンサーバーを構成する。CloudFrontはこのサーバーからファイルを取得し、エッジロケーションでファイルのディストリビューションを行う  
オリジンサーバーにはオブジェクトの最終バージョンが保持される  
コンテンツをHTTP経由で提供する場合、オリジンサーバーはS3バケットかHTTPサーバーになる

2. ファイルをオリジンサーバーにアップロードする  
S3バケットをオリジンサーバーとして使用している場合、バケット内のオブジェクトを読み取り可能にして公開すると、オブジェクトのCloudFront URLを知っているユーザーなら誰でもアクセスできる

3. CloudFrontディストリビューションを作成する  
ユーザーがファイルをリクエストした時、どのオリジンサーバーからファイルを取得するかをCloudFrontに示す

4. CloudFrontはドメイン名をディストリビューションに割り当て、CloudFrontコンソールに表示するか、プログラムでのリクエスト(APIリクエストなど)への応答として返す

5. CloudFrontはディストリビューションの構成を関係する全てのエッジロケーションに送信する  
ただし、ディストリビューションのコンテンツは送信されない

ウェブサイトやアプリケーションを開発する時には、CloudFrontが提供するドメイン名を使用する
例えば、CloudFrontがディストリビューションのドメイン名として `d111111abcdef8.cloudfront.net`を返した場合、Amazon S3バケット内(またはHTTPサーバーのルートディレクトリ内)のlogo.jpgのURLは`http://d111111abcdef8.cloudfront.net/logo.jpg`になる  
また、独自のドメイン名を使用できるように、CloudFrontディストリビューションを構成することもできる

オプションでファイルにヘッダーを追加するようにオリジンサーバーを構成することもできる  
このヘッダーはファイルがエッジロケーションのキャッシュに保持される期間を示す  
デフォルトでは24時間保持された後に期限切れになる  
最小の有効期限は0秒、上限はなし
